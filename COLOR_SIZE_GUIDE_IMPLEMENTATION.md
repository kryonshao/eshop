# 颜色、尺码和尺码指南功能实现

## 已完成的功能

### 1. 数据库结构
- ✅ 添加 `colors` 和 `sizes` 字段到 products 表（JSONB 数组）
- ✅ 创建 `size_guide_categories` 表（尺码指南分类）
- ✅ 创建 `size_guides` 表（尺码指南模板）
- ✅ 添加 `size_guide_id` 外键到 products 表
- ✅ 预置默认尺码指南（上装、下装）

### 2. 服务层
- ✅ 创建 `SizeGuideService` 服务
  - 获取商品的尺码指南
  - 管理尺码指南模板
  - 分配尺码指南到商品

### 3. 商品管理界面
- ✅ 添加颜色输入和管理
  - 动态添加/删除颜色
  - 显示为标签形式
- ✅ 添加尺码输入和管理
  - 动态添加/删除尺码
  - 显示为标签形式
- ✅ 尺码指南选择下拉框
  - 从数据库加载可用的尺码指南
  - 可选择或不选择尺码指南

### 4. 商品详情页
- ✅ 显示可选颜色（按钮形式）
- ✅ 显示可选尺码（按钮形式）
- ✅ 尺码指南展开/收起功能
- ✅ 从数据库加载尺码指南数据
- ✅ 显示尺码对照表
- ✅ 显示测量说明

### 5. 对话框滚动优化
- ✅ 修复长表单滚动问题
- ✅ 固定标题和按钮区域
- ✅ 内容区域独立滚动
- ✅ 防止按钮被遮挡

## 使用方法

### 商家添加/编辑商品时：
1. 上传商品图片（最多5张）
2. 在"可选颜色"输入框输入颜色，按回车或点击"添加"
3. 在"可选尺码"输入框输入尺码，按回车或点击"添加"
4. 从"尺码指南"下拉框选择合适的尺码指南模板
5. 保存商品

### 用户在商品详情页：
1. 选择喜欢的颜色（必选）
2. 选择合适的尺码（必选）
3. 点击"尺码指南"查看详细的尺码对照表和测量说明
4. 添加到购物车

## 数据库迁移文件

需要运行以下迁移文件：
1. `20260130000002_add_product_fields.sql` - 添加基础字段
2. `20260130000003_create_size_guide_tables.sql` - 创建尺码指南表

## 注意事项

- 颜色和尺码都存储为 JSONB 数组，便于扩展
- 尺码指南是可重用的模板，多个商品可以共享同一个尺码指南
- 商品可以不关联尺码指南（适用于不需要尺码的商品）
- 对话框最大高度为视口的 85%，确保在各种屏幕尺寸下都能正常使用
