# ä»»åŠ¡åˆ—è¡¨ï¼šè·¨å¢ƒç”µå•†å¹³å°åŠŸèƒ½å¢å¼º

## é˜¶æ®µ 1ï¼šåŠ å¯†è´§å¸æ”¯ä»˜ç³»ç»Ÿï¼ˆP0ï¼‰âœ…

### 1. æ•°æ®åº“è®¾è®¡å’Œè¿ç§» âœ…
- [x] 1.1 åˆ›å»º payments è¡¨ï¼ˆæ”¯æŒåŠ å¯†è´§å¸æ”¯ä»˜ï¼‰
- [x] 1.2 åˆ›å»º refunds è¡¨ï¼ˆæ”¯æŒåŠ å¯†è´§å¸é€€æ¬¾ï¼‰
- [x] 1.3 æ·»åŠ å¿…è¦çš„ç´¢å¼•å’Œçº¦æŸ

### 2. NOWPayments é›†æˆ âœ…
- [x] 2.1 å®ç° NOWPaymentsAdapter ç±»
- [x] 2.2 åˆ›å»º Supabase Edge Function å¤„ç† NOWPayments webhook
- [x] 2.3 å®ç°æ”¯ä»˜çŠ¶æ€åŒæ­¥æœºåˆ¶

### 3. æ”¯ä»˜æœåŠ¡å®ç° âœ…
- [x] 3.1 å®ç° PaymentService æ¥å£
- [x] 3.2 å®ç°é€€æ¬¾æœåŠ¡

### 4. å‰ç«¯æ”¯ä»˜ç•Œé¢ âœ…
- [x] 4.1 åˆ›å»ºåŠ å¯†è´§å¸é€‰æ‹©ç»„ä»¶
- [x] 4.2 åˆ›å»ºæ”¯ä»˜é‡‘é¢æ˜¾ç¤ºç»„ä»¶
- [x] 4.3 åˆ›å»ºæ”¯ä»˜åœ°å€å’ŒäºŒç»´ç æ˜¾ç¤ºç»„ä»¶
- [x] 4.4 å®ç°æ”¯ä»˜çŠ¶æ€å®æ—¶æ›´æ–°
- [x] 4.5 åˆ›å»ºæ”¯ä»˜è¶…æ—¶å¤„ç†ç•Œé¢
- [x] 4.6 é›†æˆåˆ°ç»“è´¦æµç¨‹

### 5. æµ‹è¯• âœ…
- [x] 5.1 å•å…ƒæµ‹è¯•ï¼šNOWPaymentsAdapter
- [x] 5.2 å•å…ƒæµ‹è¯•ï¼šPaymentService
- [x] 5.3 é›†æˆæµ‹è¯•ï¼šå®Œæ•´æ”¯ä»˜æµç¨‹
- [x] 5.4 é›†æˆæµ‹è¯•ï¼šé€€æ¬¾æµç¨‹
- [ ]* 5.5 ç«¯åˆ°ç«¯æµ‹è¯•ï¼šç”¨æˆ·æ”¯ä»˜ä½“éªŒï¼ˆå¯é€‰ï¼‰

## é˜¶æ®µ 2ï¼šå¤šè¯­è¨€æ”¯æŒï¼ˆP0ï¼‰

### 6. æ•°æ®åº“è®¾è®¡ âœ…
- [x] 6.1 åˆ›å»º product_translations è¡¨
- [x] 6.2 æ·»åŠ å¤šè¯­è¨€ç´¢å¼•

### 7. å›½é™…åŒ–æœåŠ¡ âœ…
- [x] 7.1 é…ç½® i18next
- [x] 7.2 å®ç° I18nService æ¥å£
- [x] 7.3 åˆ›å»ºè¯­è¨€åˆ‡æ¢ç»„ä»¶
- [x] 7.4 å‡†å¤‡ç¿»è¯‘æ–‡ä»¶

### 8. å•†å“å¤šè¯­è¨€ç®¡ç†
- [x] 8.1 å®ç°å•†å“ç¿»è¯‘ CRUD æ¥å£

- [x] 8.2 åˆ›å»ºå•†å®¶å•†å“ç¿»è¯‘ç®¡ç†ç•Œé¢
  **ç›®æ ‡**: åœ¨å•†å®¶åå°æ·»åŠ å•†å“ç¿»è¯‘ç®¡ç†åŠŸèƒ½
  **æ–‡ä»¶**: `src/components/merchant/ProductTranslationManager.tsx`
  **å®ç°è¦æ±‚**:
  - åœ¨å•†å®¶åå°å•†å“ç®¡ç†é¡µé¢æ·»åŠ "ç¿»è¯‘"æ ‡ç­¾é¡µ
  - åˆ›å»º ProductTranslationForm ç»„ä»¶ï¼ŒåŒ…å«æ‰€æœ‰æ”¯æŒè¯­è¨€çš„è¾“å…¥å­—æ®µï¼ˆzh-CN, en-US, es-ES, fr-FR, de-DEï¼‰
  - æ¯ä¸ªè¯­è¨€åŒ…å«ï¼šæ ‡é¢˜ï¼ˆtitleï¼‰ã€æè¿°ï¼ˆdescriptionï¼‰ã€è§„æ ¼ï¼ˆspecificationsï¼‰å­—æ®µ
  - é›†æˆ I18nService.saveProductTranslation() ä¿å­˜ç¿»è¯‘
  - é›†æˆ I18nService.getProductTranslation() åŠ è½½ç°æœ‰ç¿»è¯‘
  - åœ¨å•†å“åˆ—è¡¨æ˜¾ç¤ºç¿»è¯‘å®ŒæˆçŠ¶æ€ï¼ˆå¦‚ï¼š5/5 è¯­è¨€å·²ç¿»è¯‘ï¼‰
  **éªŒæ”¶æ ‡å‡†**:
  - å•†å®¶å¯ä»¥ä¸ºæ¯ä¸ªå•†å“æ·»åŠ /ç¼–è¾‘å¤šè¯­è¨€ç¿»è¯‘
  - è¡¨å•è‡ªåŠ¨åŠ è½½å·²æœ‰ç¿»è¯‘å†…å®¹
  - ä¿å­˜æˆåŠŸåæ˜¾ç¤ºæç¤ºä¿¡æ¯
  - å•†å“åˆ—è¡¨æ˜¾ç¤ºç¿»è¯‘å®Œæˆåº¦æŒ‡ç¤ºå™¨
  **ä¾èµ–**: éœ€æ±‚ 3.4, è®¾è®¡ 2.1

- [x] 8.3 å®ç°å‰ç«¯å•†å“å¤šè¯­è¨€æ˜¾ç¤º
  **ç›®æ ‡**: æ ¹æ®ç”¨æˆ·é€‰æ‹©çš„è¯­è¨€æ˜¾ç¤ºå¯¹åº”çš„å•†å“ä¿¡æ¯
  **æ–‡ä»¶**: 
  - `src/components/product/ProductCard.tsx`
  - `src/pages/ProductDetail.tsx`
  - `src/pages/Products.tsx`
  **å®ç°è¦æ±‚**:
  - åœ¨ ProductCard ç»„ä»¶ä¸­ä½¿ç”¨ i18next çš„ `useTranslation()` hook
  - è°ƒç”¨ I18nService.getProductTranslation(productId, currentLocale) è·å–ç¿»è¯‘
  - å¦‚æœç¿»è¯‘å­˜åœ¨ï¼Œæ˜¾ç¤ºç¿»è¯‘åçš„ title å’Œ description
  - å¦‚æœç¿»è¯‘ä¸å­˜åœ¨ï¼Œæ˜¾ç¤ºåŸå§‹è‹±æ–‡å†…å®¹å¹¶æ·»åŠ  `[EN]` æ ‡è®°
  - åœ¨ ProductDetail é¡µé¢åŒæ ·å®ç°å¤šè¯­è¨€æ˜¾ç¤º
  - åœ¨ Products é¡µé¢çš„åˆ†ç±»ç­›é€‰ä¹Ÿä½¿ç”¨å¤šè¯­è¨€
  - å½“ç”¨æˆ·åˆ‡æ¢è¯­è¨€æ—¶ï¼Œè‡ªåŠ¨é‡æ–°åŠ è½½å•†å“ç¿»è¯‘
  **éªŒæ”¶æ ‡å‡†**:
  - ç”¨æˆ·åˆ‡æ¢è¯­è¨€åï¼Œå•†å“æ ‡é¢˜å’Œæè¿°ç«‹å³æ›´æ–°
  - æœªç¿»è¯‘çš„å•†å“æ˜¾ç¤ºè‹±æ–‡å¹¶æœ‰æ˜æ˜¾æ ‡è®°
  - é¡µé¢åˆ·æ–°åä¿æŒç”¨æˆ·é€‰æ‹©çš„è¯­è¨€
  - æ‰€æœ‰å•†å“ç›¸å…³æ–‡æœ¬éƒ½æ”¯æŒå¤šè¯­è¨€
  **ä¾èµ–**: éœ€æ±‚ 3.4, 3.5, è®¾è®¡ 2.1

### 9. æµ‹è¯•
- [x] 9.1 å•å…ƒæµ‹è¯•ï¼šI18nService
  **ç›®æ ‡**: æµ‹è¯• I18nService çš„æ‰€æœ‰æ–¹æ³•
  **æ–‡ä»¶**: `src/services/i18n/__tests__/I18nService.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯• getProductTranslation() æ­£ç¡®è¿”å›ç¿»è¯‘
  - æµ‹è¯• saveProductTranslation() æ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“
  - æµ‹è¯•ä¸å­˜åœ¨çš„ç¿»è¯‘è¿”å› null
  - æµ‹è¯• getSupportedLocales() è¿”å›æ‰€æœ‰æ”¯æŒçš„è¯­è¨€
  - ä½¿ç”¨ Vitest å’Œ Supabase æµ‹è¯•å®¢æˆ·ç«¯
  - Mock Supabase æ•°æ®åº“è°ƒç”¨
  **éªŒæ”¶æ ‡å‡†**:
  - æ‰€æœ‰æµ‹è¯•é€šè¿‡
  - ä»£ç è¦†ç›–ç‡ > 80%

- [x] 9.2 é›†æˆæµ‹è¯•ï¼šè¯­è¨€åˆ‡æ¢
  **ç›®æ ‡**: æµ‹è¯•å®Œæ•´çš„è¯­è¨€åˆ‡æ¢æµç¨‹
  **æ–‡ä»¶**: `src/__tests__/i18n-integration.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯•ç”¨æˆ·åˆ‡æ¢è¯­è¨€åç•Œé¢æ–‡æœ¬æ›´æ–°
  - æµ‹è¯•å•†å“ä¿¡æ¯æ ¹æ®è¯­è¨€æ˜¾ç¤ºæ­£ç¡®ç¿»è¯‘
  - æµ‹è¯•è¯­è¨€åå¥½ä¿å­˜åˆ° localStorage
  - æµ‹è¯•é¡µé¢åˆ·æ–°åè¯­è¨€è®¾ç½®ä¿æŒ
  **éªŒæ”¶æ ‡å‡†**:
  - æ‰€æœ‰é›†æˆæµ‹è¯•é€šè¿‡
  - è¯­è¨€åˆ‡æ¢å“åº”æ—¶é—´ < 500ms

- [ ] 9.3 ç«¯åˆ°ç«¯æµ‹è¯•ï¼šå¤šè¯­è¨€ç”¨æˆ·ä½“éªŒ
  **ç›®æ ‡**: æµ‹è¯•çœŸå®ç”¨æˆ·åœºæ™¯ä¸‹çš„å¤šè¯­è¨€åŠŸèƒ½
  **æ–‡ä»¶**: `src/__tests__/e2e/multilingual.spec.ts`
  **å®ç°è¦æ±‚**:
  - ä½¿ç”¨ Playwright æˆ– Cypress
  - æµ‹è¯•ç”¨æˆ·ä»é¦–é¡µåˆ‡æ¢è¯­è¨€
  - æµ‹è¯•æµè§ˆå•†å“æ—¶çœ‹åˆ°ç¿»è¯‘å†…å®¹
  - æµ‹è¯•è´­ç‰©è½¦å’Œç»“è´¦æµç¨‹çš„å¤šè¯­è¨€
  **éªŒæ”¶æ ‡å‡†**:
  - E2E æµ‹è¯•é€šè¿‡
  - è¦†ç›–ä¸»è¦ç”¨æˆ·è·¯å¾„

## é˜¶æ®µ 3ï¼šåº“å­˜ç®¡ç†ç³»ç»Ÿï¼ˆP0ï¼‰

### 10. æ•°æ®åº“è®¾è®¡
- [x] 10.1 åˆ›å»ºåº“å­˜ç®¡ç†æ•°æ®åº“è¿ç§»
  **ç›®æ ‡**: åˆ›å»ºåº“å­˜ç®¡ç†æ‰€éœ€çš„æ‰€æœ‰æ•°æ®è¡¨
  **æ–‡ä»¶**: `supabase/migrations/YYYYMMDDHHMMSS_create_inventory_tables.sql`
  **å®ç°è¦æ±‚**:
  - åˆ›å»º `skus` è¡¨ï¼šå­˜å‚¨ SKU ä¿¡æ¯
    - id (UUID, PK)
    - product_id (UUID, FK -> products.id)
    - sku_code (VARCHAR(100), UNIQUE)
    - attributes (JSONB) - å­˜å‚¨å˜ä½“å±æ€§å¦‚ [{"name":"é¢œè‰²","value":"çº¢è‰²"}]
    - price (DECIMAL(10,2))
    - image_url (VARCHAR(500))
    - is_active (BOOLEAN)
    - created_at, updated_at (TIMESTAMP)
  - åˆ›å»º `warehouses` è¡¨ï¼šå­˜å‚¨ä»“åº“ä¿¡æ¯
    - id (UUID, PK)
    - name (VARCHAR(255))
    - code (VARCHAR(50), UNIQUE)
    - address (JSONB)
    - contact_info (JSONB)
    - is_active (BOOLEAN)
    - created_at (TIMESTAMP)
  - åˆ›å»º `inventory` è¡¨ï¼šå­˜å‚¨åº“å­˜æ•°é‡
    - id (UUID, PK)
    - sku_id (UUID, FK -> skus.id)
    - warehouse_id (UUID, FK -> warehouses.id)
    - available (INTEGER) - å¯ç”¨åº“å­˜
    - reserved (INTEGER) - é¢„ç•™åº“å­˜
    - alert_threshold (INTEGER) - é¢„è­¦é˜ˆå€¼
    - created_at, updated_at (TIMESTAMP)
    - UNIQUE(sku_id, warehouse_id)
  - åˆ›å»º `stock_movements` è¡¨ï¼šè®°å½•åº“å­˜å˜åŠ¨
    - id (UUID, PK)
    - sku_id (UUID, FK -> skus.id)
    - warehouse_id (UUID, FK -> warehouses.id)
    - quantity (INTEGER) - æ­£æ•°å…¥åº“ï¼Œè´Ÿæ•°å‡ºåº“
    - type (VARCHAR(50)) - 'purchase', 'sale', 'transfer', 'adjustment'
    - reference_id (UUID) - å…³è”è®¢å•IDæˆ–è°ƒæ‹¨å•ID
    - reason (TEXT)
    - created_by (UUID, FK -> profiles.id)
    - created_at (TIMESTAMP)
  - æ·»åŠ æ‰€æœ‰å¿…è¦çš„ç´¢å¼•å’Œå¤–é”®çº¦æŸ
  - é…ç½® RLS ç­–ç•¥ï¼šå•†å®¶åªèƒ½è®¿é—®è‡ªå·±çš„åº“å­˜æ•°æ®
  **éªŒæ”¶æ ‡å‡†**:
  - è¿ç§»æ–‡ä»¶å¯ä»¥æˆåŠŸæ‰§è¡Œ
  - æ‰€æœ‰è¡¨å’Œç´¢å¼•åˆ›å»ºæˆåŠŸ
  - RLS ç­–ç•¥æ­£ç¡®é…ç½®
  **ä¾èµ–**: éœ€æ±‚ 5, 8, è®¾è®¡ 3.1, 3.2


### 11. SKU ç®¡ç†æœåŠ¡
- [x] 11.1 å®ç° SKUService ç±»
  **ç›®æ ‡**: åˆ›å»º SKU ç®¡ç†æœåŠ¡ï¼Œå¤„ç†å•†å“å˜ä½“
  **æ–‡ä»¶**: `src/services/inventory/SKUService.ts`
  **å®ç°è¦æ±‚**:
  - åˆ›å»º SKUService ç±»ï¼ŒåŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š
    - `createSKU(params: CreateSKUParams): Promise<SKU>` - åˆ›å»ºæ–° SKU
    - `getProductSKUs(productId: string): Promise<SKU[]>` - è·å–å•†å“æ‰€æœ‰ SKU
    - `updateSKU(skuId: string, updates: Partial<SKU>): Promise<SKU>` - æ›´æ–° SKU
    - `generateSKUCode(productId: string, attributes: VariantAttribute[]): string` - ç”Ÿæˆ SKU ä»£ç 
    - `deleteSKU(skuId: string): Promise<void>` - è½¯åˆ é™¤ SKUï¼ˆè®¾ç½® is_active = falseï¼‰
  - SKU ä»£ç ç”Ÿæˆè§„åˆ™ï¼š`{PRODUCT_CODE}-{ATTR1}-{ATTR2}` ä¾‹å¦‚ï¼š`TSHIRT-RED-L`
  - ä½¿ç”¨ Supabase å®¢æˆ·ç«¯è¿›è¡Œæ•°æ®åº“æ“ä½œ
  - æ‰€æœ‰æ–¹æ³•éœ€è¦é”™è¯¯å¤„ç†å’Œç±»å‹å®‰å…¨
  - åˆ›å»ºå¯¹åº”çš„ TypeScript ç±»å‹å®šä¹‰åœ¨ `src/types/inventory.ts`
  **éªŒæ”¶æ ‡å‡†**:
  - å¯ä»¥æˆåŠŸåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ SKU
  - SKU ä»£ç å”¯ä¸€ä¸”ç¬¦åˆå‘½åè§„åˆ™
  - æ‰€æœ‰æ–¹æ³•æœ‰å®Œæ•´çš„ TypeScript ç±»å‹
  - é”™è¯¯æƒ…å†µæ­£ç¡®æŠ›å‡ºå¼‚å¸¸
  **ä¾èµ–**: éœ€æ±‚ 8, è®¾è®¡ 3.2, ä»»åŠ¡ 10.1

- [x] 11.2 åˆ›å»ºå•†å®¶ SKU ç®¡ç†ç•Œé¢
  **ç›®æ ‡**: åœ¨å•†å®¶åå°æ·»åŠ  SKU ç®¡ç†åŠŸèƒ½
  **æ–‡ä»¶**: 
  - `src/components/merchant/SKUManagement.tsx`
  - `src/components/merchant/SKUForm.tsx`
  - `src/components/merchant/VariantSelector.tsx`
  **å®ç°è¦æ±‚**:
  - SKUManagement ç»„ä»¶ï¼š
    - æ˜¾ç¤ºå•†å“çš„æ‰€æœ‰ SKU åˆ—è¡¨ï¼ˆè¡¨æ ¼å½¢å¼ï¼‰
    - åˆ—åŒ…æ‹¬ï¼šSKU ä»£ç ã€å˜ä½“å±æ€§ã€ä»·æ ¼ã€åº“å­˜ã€çŠ¶æ€ã€æ“ä½œ
    - æ”¯æŒæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ SKU
  - SKUForm ç»„ä»¶ï¼š
    - è¡¨å•åŒ…å«ï¼šå˜ä½“å±æ€§é€‰æ‹©å™¨ã€ä»·æ ¼è¾“å…¥ã€åˆå§‹åº“å­˜ã€å›¾ç‰‡ä¸Šä¼ 
    - è‡ªåŠ¨ç”Ÿæˆ SKU ä»£ç é¢„è§ˆ
    - è¡¨å•éªŒè¯ï¼šä»·æ ¼ > 0ï¼Œåº“å­˜ >= 0
  - VariantSelector ç»„ä»¶ï¼š
    - åŠ¨æ€æ·»åŠ å˜ä½“å±æ€§ï¼ˆå¦‚é¢œè‰²ã€å°ºç ï¼‰
    - æ¯ä¸ªå±æ€§åŒ…å«åç§°å’Œå€¼
    - æ”¯æŒæ·»åŠ /åˆ é™¤å±æ€§
  - é›†æˆ SKUService çš„æ‰€æœ‰æ–¹æ³•
  - ä½¿ç”¨ React Hook Form è¿›è¡Œè¡¨å•ç®¡ç†
  - ä½¿ç”¨ shadcn/ui ç»„ä»¶åº“
  **éªŒæ”¶æ ‡å‡†**:
  - å•†å®¶å¯ä»¥ä¸ºå•†å“æ·»åŠ å¤šä¸ª SKU
  - SKU åˆ—è¡¨æ­£ç¡®æ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯
  - è¡¨å•éªŒè¯æ­£ç¡®å·¥ä½œ
  - æ“ä½œæˆåŠŸåæ˜¾ç¤ºæç¤ºä¿¡æ¯
  **ä¾èµ–**: éœ€æ±‚ 8, è®¾è®¡ 3.2, ä»»åŠ¡ 11.1

### 12. åº“å­˜æœåŠ¡
- [x] 12.1 å®ç° InventoryService ç±»
  **ç›®æ ‡**: åˆ›å»ºåº“å­˜ç®¡ç†æ ¸å¿ƒæœåŠ¡
  **æ–‡ä»¶**: `src/services/inventory/InventoryService.ts`
  **å®ç°è¦æ±‚**:
  - åˆ›å»º InventoryService ç±»ï¼ŒåŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š
    - `checkStock(skuId: string, quantity: number): Promise<boolean>` - æ£€æŸ¥åº“å­˜æ˜¯å¦å……è¶³
    - `reserveStock(skuId: string, quantity: number, orderId: string): Promise<boolean>` - é¢„ç•™åº“å­˜ï¼ˆä¸‹å•æ—¶ï¼‰
    - `releaseStock(skuId: string, quantity: number, orderId: string): Promise<void>` - é‡Šæ”¾åº“å­˜ï¼ˆå–æ¶ˆè®¢å•æ—¶ï¼‰
    - `deductStock(skuId: string, quantity: number): Promise<void>` - æ‰£å‡åº“å­˜ï¼ˆæ”¯ä»˜æˆåŠŸæ—¶ï¼‰
    - `updateStock(skuId: string, quantity: number, reason: string): Promise<void>` - æ›´æ–°åº“å­˜ï¼ˆæ‰‹åŠ¨è°ƒæ•´ï¼‰
    - `getStockInfo(skuId: string): Promise<StockInfo>` - è·å–åº“å­˜ä¿¡æ¯
    - `checkStockAlerts(): Promise<StockAlert[]>` - æ£€æŸ¥åº“å­˜é¢„è­¦
    - `transferStock(params: TransferParams): Promise<void>` - ä»“åº“é—´è°ƒæ‹¨
  - ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ç¡®ä¿åº“å­˜æ“ä½œçš„åŸå­æ€§
  - ä½¿ç”¨ `FOR UPDATE` é”é˜²æ­¢å¹¶å‘è¶…å–
  - æ‰€æœ‰åº“å­˜å˜åŠ¨è®°å½•åˆ° stock_movements è¡¨
  - å®ç°åº“å­˜é¢„è­¦é€»è¾‘ï¼šavailable <= alert_threshold
  **éªŒæ”¶æ ‡å‡†**:
  - åº“å­˜æ“ä½œæ­£ç¡®ä¸”ä¸ä¼šè¶…å–
  - å¹¶å‘åœºæ™¯ä¸‹åº“å­˜æ•°æ®ä¸€è‡´
  - æ‰€æœ‰å˜åŠ¨éƒ½æœ‰è®°å½•
  - é¢„è­¦åŠŸèƒ½æ­£å¸¸å·¥ä½œ
  **ä¾èµ–**: éœ€æ±‚ 5, 6, 7, è®¾è®¡ 3.1, ä»»åŠ¡ 10.1

- [x] 12.2 é›†æˆåº“å­˜æœåŠ¡åˆ°è®¢å•æµç¨‹
  **ç›®æ ‡**: åœ¨è®¢å•æµç¨‹çš„å…³é”®èŠ‚ç‚¹é›†æˆåº“å­˜æ£€æŸ¥å’Œæ›´æ–°
  **æ–‡ä»¶**: 
  - `src/contexts/CartContext.tsx`
  - `src/pages/Checkout.tsx`
  - `src/services/order/OrderService.ts` (å¦‚æœå­˜åœ¨)
  **å®ç°è¦æ±‚**:
  - åœ¨è´­ç‰©è½¦æ·»åŠ å•†å“æ—¶ï¼š
    - è°ƒç”¨ `InventoryService.checkStock()` æ£€æŸ¥åº“å­˜
    - å¦‚æœåº“å­˜ä¸è¶³ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤ºå¹¶é˜»æ­¢æ·»åŠ 
  - åœ¨è®¢å•åˆ›å»ºæ—¶ï¼ˆCheckout é¡µé¢æäº¤ï¼‰ï¼š
    - è°ƒç”¨ `InventoryService.reserveStock()` é¢„ç•™åº“å­˜
    - å¦‚æœé¢„ç•™å¤±è´¥ï¼Œå›æ»šè®¢å•åˆ›å»ºå¹¶æç¤ºç”¨æˆ·
  - åœ¨è®¢å•å–æ¶ˆæ—¶ï¼š
    - è°ƒç”¨ `InventoryService.releaseStock()` é‡Šæ”¾é¢„ç•™åº“å­˜
  - åœ¨è®¢å•æ”¯ä»˜æˆåŠŸæ—¶ï¼š
    - è°ƒç”¨ `InventoryService.deductStock()` æ‰£å‡åº“å­˜
  - æ‰€æœ‰æ“ä½œéœ€è¦åœ¨æ•°æ®åº“äº‹åŠ¡ä¸­æ‰§è¡Œ
  - æ·»åŠ é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½çš„æç¤ºä¿¡æ¯
  **éªŒæ”¶æ ‡å‡†**:
  - ç”¨æˆ·æ— æ³•å°†ç¼ºè´§å•†å“åŠ å…¥è´­ç‰©è½¦
  - ä¸‹å•æ—¶æ­£ç¡®é¢„ç•™åº“å­˜
  - å–æ¶ˆè®¢å•æ—¶æ­£ç¡®é‡Šæ”¾åº“å­˜
  - æ”¯ä»˜æˆåŠŸæ—¶æ­£ç¡®æ‰£å‡åº“å­˜
  - å¹¶å‘ä¸‹å•ä¸ä¼šå¯¼è‡´è¶…å–
  **ä¾èµ–**: éœ€æ±‚ 5, è®¾è®¡ 3.1, ä»»åŠ¡ 12.1

- [ ] 12.3 åˆ›å»ºå•†å®¶åº“å­˜ç®¡ç†ç•Œé¢
  **ç›®æ ‡**: åœ¨å•†å®¶åå°æ·»åŠ åº“å­˜ç®¡ç†åŠŸèƒ½
  **æ–‡ä»¶**:
  - `src/components/merchant/InventoryManagement.tsx`
  - `src/components/merchant/StockAdjustment.tsx`
  - `src/components/merchant/StockAlerts.tsx`
  - `src/components/merchant/StockMovementHistory.tsx`
  **å®ç°è¦æ±‚**:
  - InventoryManagement ç»„ä»¶ï¼š
    - æ˜¾ç¤ºæ‰€æœ‰ SKU çš„åº“å­˜åˆ—è¡¨
    - åˆ—åŒ…æ‹¬ï¼šSKU ä»£ç ã€å•†å“åç§°ã€å¯ç”¨åº“å­˜ã€é¢„ç•™åº“å­˜ã€æ€»åº“å­˜ã€é¢„è­¦çŠ¶æ€
    - æ”¯æŒæŒ‰å•†å“ã€ä»“åº“ç­›é€‰
    - æ”¯æŒæœç´¢åŠŸèƒ½
  - StockAdjustment ç»„ä»¶ï¼š
    - è¡¨å•åŒ…å«ï¼šSKU é€‰æ‹©ã€è°ƒæ•´æ•°é‡ã€è°ƒæ•´åŸå› 
    - è°ƒç”¨ `InventoryService.updateStock()` æ›´æ–°åº“å­˜
    - æ˜¾ç¤ºè°ƒæ•´å‰åçš„åº“å­˜æ•°é‡
  - StockAlerts ç»„ä»¶ï¼š
    - æ˜¾ç¤ºæ‰€æœ‰ä½åº“å­˜é¢„è­¦çš„ SKU
    - è°ƒç”¨ `InventoryService.checkStockAlerts()`
    - æ”¯æŒä¸€é”®è¡¥è´§ï¼ˆè·³è½¬åˆ°åº“å­˜è°ƒæ•´ï¼‰
  - StockMovementHistory ç»„ä»¶ï¼š
    - æ˜¾ç¤ºåº“å­˜å˜åŠ¨å†å²è®°å½•
    - æ”¯æŒæŒ‰æ—¶é—´ã€ç±»å‹ã€SKU ç­›é€‰
    - æ˜¾ç¤ºå˜åŠ¨åŸå› å’Œæ“ä½œäºº
  - ä½¿ç”¨ shadcn/ui çš„ Tableã€Dialogã€Select ç­‰ç»„ä»¶
  - å®ç°åˆ†é¡µåŠŸèƒ½
  **éªŒæ”¶æ ‡å‡†**:
  - å•†å®¶å¯ä»¥æŸ¥çœ‹æ‰€æœ‰åº“å­˜ä¿¡æ¯
  - å¯ä»¥æ‰‹åŠ¨è°ƒæ•´åº“å­˜
  - ä½åº“å­˜é¢„è­¦æ¸…æ™°å¯è§
  - åº“å­˜å˜åŠ¨å†å²å®Œæ•´å¯è¿½æº¯
  **ä¾èµ–**: éœ€æ±‚ 5, 6, è®¾è®¡ 3.1, ä»»åŠ¡ 12.1

### 13. æµ‹è¯•
- [x] 13.1 å•å…ƒæµ‹è¯•ï¼šSKUService
  **ç›®æ ‡**: æµ‹è¯• SKU ç®¡ç†æœåŠ¡çš„æ‰€æœ‰æ–¹æ³•
  **æ–‡ä»¶**: `src/services/inventory/__tests__/SKUService.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯• createSKU() æ­£ç¡®åˆ›å»º SKU
  - æµ‹è¯• generateSKUCode() ç”Ÿæˆå”¯ä¸€ä»£ç 
  - æµ‹è¯• getProductSKUs() è¿”å›æ‰€æœ‰ SKU
  - æµ‹è¯• updateSKU() æ­£ç¡®æ›´æ–°
  - æµ‹è¯• deleteSKU() è½¯åˆ é™¤ï¼ˆis_active = falseï¼‰
  - Mock Supabase å®¢æˆ·ç«¯
  - ä½¿ç”¨ Vitest
  **éªŒæ”¶æ ‡å‡†**:
  - æ‰€æœ‰æµ‹è¯•é€šè¿‡
  - ä»£ç è¦†ç›–ç‡ > 80%

- [x] 13.2 å•å…ƒæµ‹è¯•ï¼šInventoryService
  **ç›®æ ‡**: æµ‹è¯•åº“å­˜æœåŠ¡çš„æ‰€æœ‰æ–¹æ³•
  **æ–‡ä»¶**: `src/services/inventory/__tests__/InventoryService.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯• checkStock() æ­£ç¡®æ£€æŸ¥åº“å­˜
  - æµ‹è¯• reserveStock() æ­£ç¡®é¢„ç•™åº“å­˜
  - æµ‹è¯• releaseStock() æ­£ç¡®é‡Šæ”¾åº“å­˜
  - æµ‹è¯• deductStock() æ­£ç¡®æ‰£å‡åº“å­˜
  - æµ‹è¯• checkStockAlerts() è¿”å›ä½åº“å­˜ SKU
  - æµ‹è¯• transferStock() æ­£ç¡®è°ƒæ‹¨åº“å­˜
  - Mock Supabase å®¢æˆ·ç«¯å’Œäº‹åŠ¡
  **éªŒæ”¶æ ‡å‡†**:
  - æ‰€æœ‰æµ‹è¯•é€šè¿‡
  - ä»£ç è¦†ç›–ç‡ > 80%

- [x] 13.3 é›†æˆæµ‹è¯•ï¼šåº“å­˜å¹¶å‘æ§åˆ¶
  **ç›®æ ‡**: æµ‹è¯•å¹¶å‘åœºæ™¯ä¸‹çš„åº“å­˜ä¸€è‡´æ€§
  **æ–‡ä»¶**: `src/services/inventory/__tests__/inventory-concurrency.test.ts`
  **å®ç°è¦æ±‚**:
  - æ¨¡æ‹Ÿå¤šä¸ªç”¨æˆ·åŒæ—¶ä¸‹å•åŒä¸€å•†å“
  - éªŒè¯åº“å­˜ä¸ä¼šè¶…å–
  - æµ‹è¯•æ•°æ®åº“é”æœºåˆ¶æ­£å¸¸å·¥ä½œ
  - ä½¿ç”¨çœŸå®çš„ Supabase æµ‹è¯•æ•°æ®åº“
  **éªŒæ”¶æ ‡å‡†**:
  - å¹¶å‘æµ‹è¯•é€šè¿‡
  - åº“å­˜æ•°æ®å§‹ç»ˆä¸€è‡´

- [x] 13.4 é›†æˆæµ‹è¯•ï¼šåº“å­˜é¢„è­¦
  **ç›®æ ‡**: æµ‹è¯•åº“å­˜é¢„è­¦åŠŸèƒ½
  **æ–‡ä»¶**: `src/services/inventory/__tests__/stock-alerts.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯•åº“å­˜ä½äºé˜ˆå€¼æ—¶è§¦å‘é¢„è­¦
  - æµ‹è¯•åº“å­˜æ¢å¤åæ¸…é™¤é¢„è­¦
  - æµ‹è¯•é¢„è­¦é€šçŸ¥å‘é€
  **éªŒæ”¶æ ‡å‡†**:
  - é¢„è­¦æµ‹è¯•é€šè¿‡
  - é¢„è­¦é€»è¾‘æ­£ç¡®

## é˜¶æ®µ 4ï¼šç‰©æµé…é€ç³»ç»Ÿï¼ˆP0ï¼‰

### 14. æ•°æ®åº“è®¾è®¡
- [ ] 14.1 åˆ›å»ºç‰©æµé…é€æ•°æ®åº“è¿ç§»
  **ç›®æ ‡**: åˆ›å»ºç‰©æµé…é€æ‰€éœ€çš„æ‰€æœ‰æ•°æ®è¡¨
  **æ–‡ä»¶**: `supabase/migrations/YYYYMMDDHHMMSS_create_shipping_tables.sql`
  **å®ç°è¦æ±‚**:
  - åˆ›å»º `shipments` è¡¨ï¼šå­˜å‚¨è¿å•ä¿¡æ¯
    - id (UUID, PK)
    - order_id (UUID, FK -> orders.id)
    - provider_id (VARCHAR(50))
    - provider_name (VARCHAR(100))
    - tracking_number (VARCHAR(255), UNIQUE)
    - status (VARCHAR(50)) - 'pending', 'picked_up', 'in_transit', 'out_for_delivery', 'delivered', 'failed'
    - origin_address (JSONB)
    - destination_address (JSONB)
    - shipping_fee (DECIMAL(10,2))
    - estimated_delivery (DATE)
    - actual_delivery (TIMESTAMP)
    - created_at, updated_at (TIMESTAMP)
  - åˆ›å»º `tracking_events` è¡¨ï¼šå­˜å‚¨ç‰©æµè·Ÿè¸ªäº‹ä»¶
    - id (UUID, PK)
    - shipment_id (UUID, FK -> shipments.id)
    - status (VARCHAR(50))
    - location (VARCHAR(255))
    - description (TEXT)
    - event_time (TIMESTAMP)
    - created_at (TIMESTAMP)
  - åˆ›å»º `shipping_providers` è¡¨ï¼šå­˜å‚¨ç‰©æµå•†é…ç½®
    - id (UUID, PK)
    - code (VARCHAR(50), UNIQUE)
    - name (VARCHAR(100))
    - api_endpoint (VARCHAR(500))
    - api_key_encrypted (TEXT)
    - is_active (BOOLEAN)
    - supported_countries (JSONB)
    - config (JSONB)
    - created_at, updated_at (TIMESTAMP)
  - æ·»åŠ æ‰€æœ‰å¿…è¦çš„ç´¢å¼•å’Œå¤–é”®çº¦æŸ
  - é…ç½® RLS ç­–ç•¥
  **éªŒæ”¶æ ‡å‡†**:
  - è¿ç§»æ–‡ä»¶å¯ä»¥æˆåŠŸæ‰§è¡Œ
  - æ‰€æœ‰è¡¨å’Œç´¢å¼•åˆ›å»ºæˆåŠŸ
  - RLS ç­–ç•¥æ­£ç¡®é…ç½®
  **ä¾èµ–**: éœ€æ±‚ 9, 10, 11, è®¾è®¡ 4.1


### 15. ç‰©æµæœåŠ¡å®ç°
- [ ] 15.1 å®ç° ShippingService æ ¸å¿ƒç±»
  **ç›®æ ‡**: åˆ›å»ºç‰©æµæœåŠ¡æ ¸å¿ƒåŠŸèƒ½
  **æ–‡ä»¶**: `src/services/shipping/ShippingService.ts`
  **å®ç°è¦æ±‚**:
  - åˆ›å»º ShippingService ç±»ï¼ŒåŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š
    - `calculateShippingFee(params: ShippingCalculationParams): Promise<ShippingOption[]>` - è®¡ç®—è¿è´¹
    - `createShipment(params: CreateShipmentParams): Promise<Shipment>` - åˆ›å»ºè¿å•
    - `trackShipment(trackingNumber: string): Promise<TrackingInfo>` - è·å–ç‰©æµè·Ÿè¸ª
    - `updateShipmentStatus(shipmentId: string): Promise<void>` - æ›´æ–°ç‰©æµçŠ¶æ€
    - `estimateDeliveryTime(params: DeliveryEstimateParams): Promise<DeliveryEstimate>` - é¢„ä¼°é€è¾¾æ—¶é—´
  - è¿è´¹è®¡ç®—é€»è¾‘ï¼š
    - åŸºäºå•†å“æ€»é‡é‡å’Œä½“ç§¯
    - åŸºäºå‘è´§åœ°å’Œç›®çš„åœ°è·ç¦»
    - æ”¯æŒå…è¿è´¹è§„åˆ™ï¼ˆè®¢å•é‡‘é¢ >= é˜ˆå€¼ï¼‰
  - ä½¿ç”¨ Supabase å®¢æˆ·ç«¯æ“ä½œæ•°æ®åº“
  - åˆ›å»ºå¯¹åº”çš„ TypeScript ç±»å‹å®šä¹‰åœ¨ `src/types/shipping.ts`
  **éªŒæ”¶æ ‡å‡†**:
  - è¿è´¹è®¡ç®—å‡†ç¡®
  - è¿å•åˆ›å»ºæˆåŠŸ
  - ç‰©æµè·Ÿè¸ªä¿¡æ¯æ­£ç¡®
  - æ‰€æœ‰æ–¹æ³•æœ‰å®Œæ•´çš„ç±»å‹å®šä¹‰
  **ä¾èµ–**: éœ€æ±‚ 9, 10, è®¾è®¡ 4.1, ä»»åŠ¡ 14.1

- [ ] 15.2 å®ç°ç‰©æµå•†é€‚é…å™¨æ¥å£
  **ç›®æ ‡**: åˆ›å»ºç»Ÿä¸€çš„ç‰©æµå•†æ¥å£å’Œé€‚é…å™¨
  **æ–‡ä»¶**: 
  - `src/services/shipping/adapters/LogisticsProvider.ts` (æ¥å£)
  - `src/services/shipping/adapters/DHLAdapter.ts`
  - `src/services/shipping/adapters/FedExAdapter.ts`
  - `src/services/shipping/adapters/ChinaPostAdapter.ts`
  **å®ç°è¦æ±‚**:
  - å®šä¹‰ LogisticsProvider æ¥å£ï¼š
    ```typescript
    interface LogisticsProvider {
      createShipment(params: any): Promise<{ trackingNumber: string }>
      getTracking(trackingNumber: string): Promise<TrackingInfo>
      calculateRate(params: any): Promise<number>
    }
    ```
  - å®ç° DHLAdapterï¼š
    - é›†æˆ DHL API
    - å®ç°åˆ›å»ºè¿å•ã€æŸ¥è¯¢è·Ÿè¸ªã€è®¡ç®—è¿è´¹
    - å¤„ç† API é”™è¯¯å’Œé‡è¯•é€»è¾‘
  - å®ç° FedExAdapterï¼š
    - é›†æˆ FedEx API
    - å®ç°ç›¸åŒçš„æ¥å£æ–¹æ³•
  - å®ç° ChinaPostAdapterï¼š
    - é›†æˆä¸­å›½é‚®æ”¿ API
    - å®ç°ç›¸åŒçš„æ¥å£æ–¹æ³•
  - æ‰€æœ‰é€‚é…å™¨ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨ API å¯†é’¥
  - å®ç°é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
  **éªŒæ”¶æ ‡å‡†**:
  - ä¸‰ä¸ªé€‚é…å™¨éƒ½å®ç°äº† LogisticsProvider æ¥å£
  - å¯ä»¥æˆåŠŸè°ƒç”¨ç‰©æµå•† API
  - é”™è¯¯å¤„ç†å®Œå–„
  **ä¾èµ–**: éœ€æ±‚ 9, è®¾è®¡ 4.2, ä»»åŠ¡ 15.1

- [ ] 15.3 å®ç°è¿è´¹è®¡ç®—å¼•æ“
  **ç›®æ ‡**: åˆ›å»ºçµæ´»çš„è¿è´¹è®¡ç®—å¼•æ“
  **æ–‡ä»¶**: `src/services/shipping/ShippingRateCalculator.ts`
  **å®ç°è¦æ±‚**:
  - åˆ›å»º ShippingRateCalculator ç±»
  - å®ç°åŸºäºé‡é‡çš„è¿è´¹è®¡ç®—ï¼š
    - å®šä¹‰é‡é‡åŒºé—´å’Œå¯¹åº”ä»·æ ¼
    - ä¾‹å¦‚ï¼š0-1kg: $10, 1-5kg: $20, 5kg+: $30
  - å®ç°åŸºäºè·ç¦»çš„è¿è´¹è®¡ç®—ï¼š
    - æ ¹æ®å‘è´§åœ°å’Œç›®çš„åœ°è®¡ç®—è·ç¦»
    - ä½¿ç”¨è·ç¦»åŒºé—´å®šä»·
  - å®ç°å…è¿è´¹è§„åˆ™ï¼š
    - è®¢å•é‡‘é¢ >= å•†å®¶è®¾ç½®çš„é˜ˆå€¼æ—¶å…è¿è´¹
    - ç‰¹å®šå•†å“æˆ–åˆ†ç±»å…è¿è´¹
  - æ”¯æŒå•†å®¶è‡ªå®šä¹‰è¿è´¹è§„åˆ™
  - è¿è´¹è§„åˆ™å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½
  **éªŒæ”¶æ ‡å‡†**:
  - è¿è´¹è®¡ç®—å‡†ç¡®
  - æ”¯æŒå¤šç§è®¡ç®—è§„åˆ™
  - å…è¿è´¹è§„åˆ™æ­£ç¡®åº”ç”¨
  **ä¾èµ–**: éœ€æ±‚ 10, è®¾è®¡ 4.1, ä»»åŠ¡ 15.1

- [ ] 15.4 å®ç°ç‰©æµè·Ÿè¸ªå®šæ—¶ä»»åŠ¡
  **ç›®æ ‡**: åˆ›å»ºå®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ›´æ–°ç‰©æµçŠ¶æ€
  **æ–‡ä»¶**: `supabase/functions/update-shipment-tracking/index.ts`
  **å®ç°è¦æ±‚**:
  - åˆ›å»º Supabase Edge Function
  - æ¯4å°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼ˆä½¿ç”¨ Supabase Cronï¼‰
  - æŸ¥è¯¢æ‰€æœ‰æœªå®Œæˆçš„è¿å•ï¼ˆstatus != 'delivered' and != 'failed'ï¼‰
  - å¯¹æ¯ä¸ªè¿å•è°ƒç”¨å¯¹åº”ç‰©æµå•†çš„ API è·å–æœ€æ–°çŠ¶æ€
  - æ›´æ–° shipments è¡¨çš„ status
  - æ’å…¥æ–°çš„ tracking_events è®°å½•
  - å¦‚æœçŠ¶æ€å˜ä¸º 'delivered'ï¼Œæ›´æ–°è®¢å•çŠ¶æ€ä¸º 'completed'
  - å®ç°é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
  - è®°å½•æ‰§è¡Œæ—¥å¿—
  **éªŒæ”¶æ ‡å‡†**:
  - å®šæ—¶ä»»åŠ¡æ­£å¸¸æ‰§è¡Œ
  - ç‰©æµçŠ¶æ€è‡ªåŠ¨æ›´æ–°
  - åŒ…è£¹ç­¾æ”¶åè®¢å•è‡ªåŠ¨å®Œæˆ
  **ä¾èµ–**: éœ€æ±‚ 11, è®¾è®¡ 4.1, ä»»åŠ¡ 15.2

### 16. å‰ç«¯ç‰©æµç•Œé¢
- [ ] 16.1 åˆ›å»ºè¿è´¹è®¡ç®—æ˜¾ç¤ºç»„ä»¶
  **ç›®æ ‡**: åœ¨è´­ç‰©è½¦å’Œç»“è´¦é¡µé¢æ˜¾ç¤ºè¿è´¹
  **æ–‡ä»¶**:
  - `src/components/shipping/ShippingCalculator.tsx`
  - ä¿®æ”¹ `src/components/cart/Cart.tsx`
  - ä¿®æ”¹ `src/pages/Checkout.tsx`
  **å®ç°è¦æ±‚**:
  - ShippingCalculator ç»„ä»¶ï¼š
    - è¾“å…¥ï¼šæ”¶è´§åœ°å€
    - è°ƒç”¨ ShippingService.calculateShippingFee() è®¡ç®—è¿è´¹
    - æ˜¾ç¤ºè¿è´¹é‡‘é¢
    - å¦‚æœç¬¦åˆå…è¿è´¹æ¡ä»¶ï¼Œæ˜¾ç¤º"å…è¿è´¹"æ ‡è®°
  - åœ¨ Cart ç»„ä»¶ä¸­é›†æˆï¼š
    - æ˜¾ç¤ºé¢„ä¼°è¿è´¹
    - æç¤º"è¾“å…¥åœ°å€åæ˜¾ç¤ºå‡†ç¡®è¿è´¹"
  - åœ¨ Checkout ç»„ä»¶ä¸­é›†æˆï¼š
    - ç”¨æˆ·è¾“å…¥åœ°å€åè‡ªåŠ¨è®¡ç®—è¿è´¹
    - å®æ—¶æ›´æ–°æ€»é‡‘é¢ï¼ˆå•†å“é‡‘é¢ + è¿è´¹ï¼‰
  - ä½¿ç”¨ React Query ç¼“å­˜è¿è´¹è®¡ç®—ç»“æœ
  - æ·»åŠ åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†
  **éªŒæ”¶æ ‡å‡†**:
  - ç”¨æˆ·å¯ä»¥çœ‹åˆ°è¿è´¹é‡‘é¢
  - è¾“å…¥åœ°å€åè¿è´¹è‡ªåŠ¨æ›´æ–°
  - å…è¿è´¹è§„åˆ™æ­£ç¡®æ˜¾ç¤º
  **ä¾èµ–**: éœ€æ±‚ 10, è®¾è®¡ 4.1, ä»»åŠ¡ 15.1, 15.3

- [ ] 16.2 åˆ›å»ºç‰©æµæ–¹å¼é€‰æ‹©ç»„ä»¶
  **ç›®æ ‡**: è®©ç”¨æˆ·é€‰æ‹©ç‰©æµæ–¹å¼
  **æ–‡ä»¶**: `src/components/shipping/ShippingMethodSelector.tsx`
  **å®ç°è¦æ±‚**:
  - æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„ç‰©æµé€‰é¡¹ï¼ˆDHLã€FedExã€ä¸­å›½é‚®æ”¿ç­‰ï¼‰
  - æ¯ä¸ªé€‰é¡¹æ˜¾ç¤ºï¼š
    - ç‰©æµå•†åç§°å’Œ logo
    - è¿è´¹é‡‘é¢
    - é¢„è®¡é€è¾¾æ—¶é—´ï¼ˆX-Y å¤©ï¼‰
  - ç”¨æˆ·å¯ä»¥é€‰æ‹©ä¸€ä¸ªç‰©æµæ–¹å¼
  - é€‰ä¸­çš„ç‰©æµæ–¹å¼é«˜äº®æ˜¾ç¤º
  - é›†æˆåˆ° Checkout é¡µé¢
  - ä½¿ç”¨ Radio Group ç»„ä»¶
  **éªŒæ”¶æ ‡å‡†**:
  - æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨ç‰©æµé€‰é¡¹
  - ç”¨æˆ·å¯ä»¥é€‰æ‹©ç‰©æµæ–¹å¼
  - é€‰æ‹©åæ›´æ–°è®¢å•ä¿¡æ¯
  **ä¾èµ–**: éœ€æ±‚ 9, 10, è®¾è®¡ 4.1, ä»»åŠ¡ 15.1

- [ ] 16.3 åˆ›å»ºç‰©æµè·Ÿè¸ªç•Œé¢
  **ç›®æ ‡**: è®©ç”¨æˆ·æŸ¥çœ‹åŒ…è£¹ç‰©æµçŠ¶æ€
  **æ–‡ä»¶**:
  - `src/components/shipping/ShipmentTracking.tsx`
  - `src/components/shipping/TrackingTimeline.tsx`
  - ä¿®æ”¹ `src/components/orders/OrderDetail.tsx`
  **å®ç°è¦æ±‚**:
  - ShipmentTracking ç»„ä»¶ï¼š
    - æ˜¾ç¤ºè¿å•å·
    - æ˜¾ç¤ºå½“å‰ç‰©æµçŠ¶æ€
    - æ˜¾ç¤ºé¢„è®¡é€è¾¾æ—¥æœŸ
    - è°ƒç”¨ ShippingService.trackShipment() è·å–è·Ÿè¸ªä¿¡æ¯
  - TrackingTimeline ç»„ä»¶ï¼š
    - ä»¥æ—¶é—´çº¿å½¢å¼æ˜¾ç¤ºç‰©æµè½¨è¿¹
    - æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ï¼šæ—¶é—´ã€åœ°ç‚¹ã€çŠ¶æ€æè¿°
    - å½“å‰çŠ¶æ€é«˜äº®æ˜¾ç¤º
    - ä½¿ç”¨ shadcn/ui çš„ Timeline æˆ–è‡ªå®šä¹‰ç»„ä»¶
  - åœ¨ OrderDetail é¡µé¢é›†æˆï¼š
    - è®¢å•å‘è´§åæ˜¾ç¤ºç‰©æµè·Ÿè¸ªä¿¡æ¯
    - æ·»åŠ "åˆ·æ–°ç‰©æµ"æŒ‰é’®
  - å®ç°è‡ªåŠ¨åˆ·æ–°ï¼ˆæ¯30ç§’ï¼‰
  **éªŒæ”¶æ ‡å‡†**:
  - ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ç‰©æµè½¨è¿¹
  - æ—¶é—´çº¿æ¸…æ™°æ˜“æ‡‚
  - ç‰©æµä¿¡æ¯å®æ—¶æ›´æ–°
  **ä¾èµ–**: éœ€æ±‚ 11, è®¾è®¡ 4.1, ä»»åŠ¡ 15.1

- [ ] 16.4 åˆ›å»ºå•†å®¶å‘è´§ç®¡ç†ç•Œé¢
  **ç›®æ ‡**: è®©å•†å®¶å¯ä»¥åˆ›å»ºè¿å•å’Œå‘è´§
  **æ–‡ä»¶**:
  - `src/components/merchant/ShipmentManagement.tsx`
  - `src/components/merchant/CreateShipment.tsx`
  - ä¿®æ”¹ `src/components/merchant/OrderManagement.tsx`
  **å®ç°è¦æ±‚**:
  - ShipmentManagement ç»„ä»¶ï¼š
    - æ˜¾ç¤ºæ‰€æœ‰å¾…å‘è´§è®¢å•åˆ—è¡¨
    - æ˜¾ç¤ºè®¢å•å·ã€ä¹°å®¶ã€æ”¶è´§åœ°å€ã€å•†å“ä¿¡æ¯
    - æ¯ä¸ªè®¢å•æœ‰"å‘è´§"æŒ‰é’®
  - CreateShipment ç»„ä»¶ï¼ˆDialogï¼‰ï¼š
    - é€‰æ‹©ç‰©æµå•†
    - è¾“å…¥æˆ–è‡ªåŠ¨ç”Ÿæˆè¿å•å·
    - ç¡®è®¤å‘è´§åœ°å€å’Œæ”¶è´§åœ°å€
    - è°ƒç”¨ ShippingService.createShipment() åˆ›å»ºè¿å•
    - å¦‚æœç‰©æµå•† API å¤±è´¥ï¼Œå…è®¸æ‰‹åŠ¨è¾“å…¥è¿å•å·
  - åœ¨ OrderManagement ä¸­é›†æˆï¼š
    - æ·»åŠ "å‘è´§ç®¡ç†"æ ‡ç­¾é¡µ
    - æ˜¾ç¤ºå·²å‘è´§è®¢å•çš„ç‰©æµçŠ¶æ€
  - å‘è´§æˆåŠŸåæ›´æ–°è®¢å•çŠ¶æ€ä¸º 'shipped'
  - å‘é€å‘è´§é€šçŸ¥é‚®ä»¶ç»™ä¹°å®¶
  **éªŒæ”¶æ ‡å‡†**:
  - å•†å®¶å¯ä»¥æ‰¹é‡æŸ¥çœ‹å¾…å‘è´§è®¢å•
  - å¯ä»¥åˆ›å»ºè¿å•å¹¶å‘è´§
  - å‘è´§åä¹°å®¶æ”¶åˆ°é€šçŸ¥
  **ä¾èµ–**: éœ€æ±‚ 9, è®¾è®¡ 4.1, ä»»åŠ¡ 15.1, 15.2

### 17. æµ‹è¯•
- [ ] 17.1 å•å…ƒæµ‹è¯•ï¼šShippingService
  **ç›®æ ‡**: æµ‹è¯•ç‰©æµæœåŠ¡çš„æ‰€æœ‰æ–¹æ³•
  **æ–‡ä»¶**: `src/services/shipping/__tests__/ShippingService.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯• calculateShippingFee() æ­£ç¡®è®¡ç®—è¿è´¹
  - æµ‹è¯• createShipment() åˆ›å»ºè¿å•
  - æµ‹è¯• trackShipment() è·å–è·Ÿè¸ªä¿¡æ¯
  - æµ‹è¯• estimateDeliveryTime() é¢„ä¼°é€è¾¾æ—¶é—´
  - Mock ç‰©æµå•†é€‚é…å™¨
  - ä½¿ç”¨ Vitest
  **éªŒæ”¶æ ‡å‡†**:
  - æ‰€æœ‰æµ‹è¯•é€šè¿‡
  - ä»£ç è¦†ç›–ç‡ > 80%

- [ ] 17.2 å•å…ƒæµ‹è¯•ï¼šShippingRateCalculator
  **ç›®æ ‡**: æµ‹è¯•è¿è´¹è®¡ç®—å¼•æ“
  **æ–‡ä»¶**: `src/services/shipping/__tests__/ShippingRateCalculator.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯•åŸºäºé‡é‡çš„è¿è´¹è®¡ç®—
  - æµ‹è¯•åŸºäºè·ç¦»çš„è¿è´¹è®¡ç®—
  - æµ‹è¯•å…è¿è´¹è§„åˆ™
  - æµ‹è¯•è¾¹ç•Œæƒ…å†µï¼ˆ0é‡é‡ã€è¶…å¤§é‡é‡ç­‰ï¼‰
  **éªŒæ”¶æ ‡å‡†**:
  - æ‰€æœ‰æµ‹è¯•é€šè¿‡
  - è¿è´¹è®¡ç®—å‡†ç¡®

- [ ] 17.3 é›†æˆæµ‹è¯•ï¼šè¿è´¹è®¡ç®—
  **ç›®æ ‡**: æµ‹è¯•å®Œæ•´çš„è¿è´¹è®¡ç®—æµç¨‹
  **æ–‡ä»¶**: `src/services/shipping/__tests__/shipping-calculation.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯•ä»è´­ç‰©è½¦åˆ°ç»“è´¦çš„è¿è´¹è®¡ç®—
  - æµ‹è¯•ä¸åŒåœ°å€çš„è¿è´¹å·®å¼‚
  - æµ‹è¯•å…è¿è´¹è§„åˆ™åº”ç”¨
  **éªŒæ”¶æ ‡å‡†**:
  - é›†æˆæµ‹è¯•é€šè¿‡
  - è¿è´¹è®¡ç®—æµç¨‹æ­£ç¡®

- [ ] 17.4 é›†æˆæµ‹è¯•ï¼šç‰©æµè·Ÿè¸ª
  **ç›®æ ‡**: æµ‹è¯•ç‰©æµè·Ÿè¸ªåŠŸèƒ½
  **æ–‡ä»¶**: `src/services/shipping/__tests__/tracking.test.ts`
  **å®ç°è¦æ±‚**:
  - æµ‹è¯•åˆ›å»ºè¿å•åå¯ä»¥è·Ÿè¸ª
  - æµ‹è¯•ç‰©æµçŠ¶æ€æ›´æ–°
  - æµ‹è¯•åŒ…è£¹ç­¾æ”¶åè®¢å•å®Œæˆ
  - Mock ç‰©æµå•† API
  **éªŒæ”¶æ ‡å‡†**:
  - é›†æˆæµ‹è¯•é€šè¿‡
  - ç‰©æµè·Ÿè¸ªæµç¨‹æ­£ç¡®

## æ³¨æ„äº‹é¡¹

- æ‰€æœ‰å•†å“ä»·æ ¼ä»¥ USD ä¸ºåŸºå‡†è´§å¸
- æ”¯ä»˜æ—¶å®æ—¶è½¬æ¢ä¸ºåŠ å¯†è´§å¸é‡‘é¢
- é€€æ¬¾ä½¿ç”¨åŸæ”¯ä»˜æ—¶çš„åŠ å¯†è´§å¸å’Œæ±‡ç‡
- ä¼˜å…ˆå®ç° P0 çº§åˆ«åŠŸèƒ½ï¼Œç¡®ä¿æ ¸å¿ƒæµç¨‹å¯ç”¨
- æ¯ä¸ªä»»åŠ¡å®Œæˆåè¿›è¡Œä»£ç å®¡æŸ¥
- æ ‡è®°ä¸º * çš„ä»»åŠ¡ä¸ºå¯é€‰ä»»åŠ¡

## å®æ–½å»ºè®®

å»ºè®®æŒ‰ç…§ä»¥ä¸‹é¡ºåºå®æ–½ï¼š

1. **é˜¶æ®µ 2 å‰©ä½™ä»»åŠ¡**ï¼šå®Œæˆå¤šè¯­è¨€å‰ç«¯é›†æˆï¼ˆä»»åŠ¡ 8.2, 8.3, 9.1-9.3ï¼‰
2. **é˜¶æ®µ 3**ï¼šåº“å­˜ç®¡ç†ç³»ç»Ÿï¼ˆä»»åŠ¡ 10.1-13.4ï¼‰
3. **é˜¶æ®µ 4**ï¼šç‰©æµé…é€ç³»ç»Ÿï¼ˆä»»åŠ¡ 14.1-17.4ï¼‰
4. **åç»­é˜¶æ®µ**ï¼šè¥é”€ç³»ç»Ÿã€å®¢æˆ·æœåŠ¡ã€æ•°æ®åˆ†æã€å®‰å…¨åˆè§„ç­‰

## å½“å‰çŠ¶æ€

- âœ… **é˜¶æ®µ 1**ï¼šåŠ å¯†è´§å¸æ”¯ä»˜ç³»ç»Ÿå·²å®Œæˆ
- ğŸ”„ **é˜¶æ®µ 2**ï¼šå¤šè¯­è¨€æ”¯æŒéƒ¨åˆ†å®Œæˆï¼ˆæ•°æ®åº“å’ŒæœåŠ¡å±‚å®Œæˆï¼Œå‰ç«¯é›†æˆå¾…å®Œæˆï¼‰
- â³ **é˜¶æ®µ 3-4**ï¼šå¾…å¼€å§‹

## å¦‚ä½•æ‰§è¡Œä»»åŠ¡

1. é€‰æ‹©ä¸€ä¸ªæœªå®Œæˆçš„ä»»åŠ¡ï¼ˆçŠ¶æ€ä¸º `[ ]`ï¼‰
2. é˜…è¯»ä»»åŠ¡çš„ç›®æ ‡ã€æ–‡ä»¶ã€å®ç°è¦æ±‚å’ŒéªŒæ”¶æ ‡å‡†
3. å®ç°ä»£ç å¹¶ç¡®ä¿æ»¡è¶³æ‰€æœ‰éªŒæ”¶æ ‡å‡†
4. è¿è¡Œç›¸å…³æµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸
5. æ›´æ–°ä»»åŠ¡çŠ¶æ€ä¸º `[x]`
6. ç»§ç»­ä¸‹ä¸€ä¸ªä»»åŠ¡

**æç¤º**: å¦‚æœä½ æƒ³è®© Kiro å¸®ä½ æ‰§è¡Œä»»åŠ¡ï¼Œå¯ä»¥è¯´ï¼š"æ‰§è¡Œä»»åŠ¡ 8.2" æˆ– "å¼€å§‹ä»»åŠ¡ 8.2"

