# 分类功能更新说明

## ✅ 更新内容

### 1. 数据库更新
- ✅ 清理所有旧分类
- ✅ 只保留3个季节性分类：
  - 春秋装
  - 夏装
  - 冬装
- ✅ 自动删除不在列表中的分类

### 2. 界面更新
- ✅ 分类字段从输入框改为下拉选择
- ✅ 自动加载可用分类
- ✅ 防止输入错误的分类名称

---

## 🚀 使用方法

### 第一步：运行更新脚本

在 Supabase SQL Editor 中运行：
```
supabase/ADD_PRODUCT_TAGS.sql
```

**脚本会自动：**
1. 删除所有旧分类（如果有）
2. 创建/更新3个季节性分类
3. 保持现有商品的分类数据不变

### 第二步：使用新的分类选择器

1. **添加商品时**
   ```
   商家后台 → 商品 → 添加商品
   → 分类下拉框 → 选择：春秋装/夏装/冬装
   ```

2. **编辑商品时**
   ```
   商家后台 → 商品 → 编辑
   → 分类下拉框 → 选择：春秋装/夏装/冬装
   ```

---

## 📋 分类说明

### 春秋装
- **英文名**：Spring & Autumn
- **适用**：春季和秋季服装
- **温度**：10-25°C
- **示例**：薄外套、卫衣、长袖T恤

### 夏装
- **英文名**：Summer
- **适用**：夏季服装
- **温度**：25-35°C
- **示例**：短袖、短裤、连衣裙

### 冬装
- **英文名**：Winter
- **适用**：冬季服装
- **温度**：-10-10°C
- **示例**：羽绒服、棉衣、厚毛衣

---

## 💡 优势

### 之前（输入框）
- ❌ 可能输入错误的分类名
- ❌ 拼写错误导致分类不匹配
- ❌ 不知道有哪些可用分类

### 现在（下拉选择）
- ✅ 只能选择预设的分类
- ✅ 避免拼写错误
- ✅ 清楚显示所有可用分类
- ✅ 可以不选择分类（留空）

---

## 🔄 迁移现有商品

### 如果你已有商品

**情况 1：商品分类是旧的名称**
```
例如：商品分类 = "服装"
→ 需要手动编辑，改为：春秋装/夏装/冬装
```

**情况 2：商品分类已经是新名称**
```
例如：商品分类 = "春秋装"
→ 无需修改，继续使用
```

**情况 3：商品没有分类**
```
商品分类 = 空
→ 可选择添加分类，或保持为空
```

### 批量更新建议

如果有很多商品需要更新分类，可以在 Supabase SQL Editor 中运行：

```sql
-- 将所有"服装"改为"春秋装"
UPDATE products SET category = '春秋装' WHERE category = '服装';

-- 将所有"鞋类"改为"春秋装"
UPDATE products SET category = '春秋装' WHERE category = '鞋类';

-- 根据实际情况调整
```

---

## 📊 首页显示

### 分类卡片
首页会显示3个分类卡片：
1. 春秋装
2. 夏装
3. 冬装

### 点击效果
用户点击分类卡片 → 跳转到该分类的商品列表

### 显示条件
- 分类必须在 product_categories 表中
- is_active = true
- 按 display_order 排序

---

## ⚠️ 注意事项

1. **分类是可选的**
   - 商品可以不设置分类
   - 但建议为所有商品设置分类

2. **只有3个分类**
   - 不能添加其他分类
   - 如需添加，需要修改数据库

3. **分类名称固定**
   - 春秋装、夏装、冬装
   - 不能修改名称

4. **旧分类会被删除**
   - 运行脚本后，旧分类会被清理
   - 商品的分类字段不会被修改

---

## 🆘 常见问题

**Q: 运行脚本后，我的商品分类会丢失吗？**
A: 不会。脚本只删除 product_categories 表中的旧分类，不会修改商品的 category 字段。

**Q: 如果商品的分类是旧名称怎么办？**
A: 需要手动编辑商品，从下拉框选择新的分类。

**Q: 可以不选择分类吗？**
A: 可以。分类是可选的，可以留空。

**Q: 如何添加新的分类？**
A: 需要在数据库的 product_categories 表中添加，并更新相关代码。

**Q: 分类图片在哪里设置？**
A: 在 product_categories 表的 image_url 字段中设置。

---

## 📞 需要帮助？

查看相关文档：
- `CATEGORY_GUIDE.md` - 分类详细指南
- `HOMEPAGE_MANAGEMENT_GUIDE.md` - 首页管理指南
- `QUICK_HOMEPAGE_SETUP.md` - 快速设置指南
